#!/bin/zsh

local file=/tmp/lastWindow

guake --hide
sleep 0.15

if [[ -z $1 ]]; then
  echo "Please specify a window to switch to"
  exit
fi

if [[ -e $file ]]; then
  lastWindow=$(cat $file)
  xdotool windowactivate --sync $lastWindow
  rm $file
else
  touch $file
  lastWindow=$(xdotool getactivewindow)
  echo $lastWindow > $file
  xdotool windowactivate --sync $(xdotool search --onlyvisible --class $1)
fi
